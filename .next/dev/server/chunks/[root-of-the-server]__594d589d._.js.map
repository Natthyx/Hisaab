{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/natezeleke/Desktop/Main_Project/Hisaab/app/api/auth/update-initial-balance/route.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nexport async function POST(req: Request) {\n  try {\n    const { userId, initialBalance } = await req.json()\n\n    // Validate input\n    if (!userId) {\n      return Response.json({ error: 'User ID is required' }, { status: 400 })\n    }\n\n    const supabase = createClient(\n      process.env.NEXT_PUBLIC_SUPABASE_URL!,\n      process.env.SUPABASE_SERVICE_KEY! // bypasses RLS\n    )\n\n    const { error } = await supabase\n      .from(\"users\")\n      .update({ initial_balance: initialBalance || 0 })\n      .eq('id', userId)\n\n    if (error) {\n      console.error('Supabase update error:', error)\n      return Response.json({ error: error.message }, { status: 400 })\n    }\n\n    return Response.json({ success: true })\n  } catch (error) {\n    console.error('Unexpected error:', error)\n    return Response.json({ error: 'An unexpected error occurred' }, { status: 500 })\n  }\n}"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,cAAc,EAAE,GAAG,MAAM,IAAI,IAAI;QAEjD,iBAAiB;QACjB,IAAI,CAAC,QAAQ;YACX,OAAO,SAAS,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QACvE;QAEA,MAAM,WAAW,IAAA,yMAAY,gFAE3B,QAAQ,GAAG,CAAC,oBAAoB;QAGlC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,SACL,MAAM,CAAC;YAAE,iBAAiB,kBAAkB;QAAE,GAC9C,EAAE,CAAC,MAAM;QAEZ,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,0BAA0B;YACxC,OAAO,SAAS,IAAI,CAAC;gBAAE,OAAO,MAAM,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QAC/D;QAEA,OAAO,SAAS,IAAI,CAAC;YAAE,SAAS;QAAK;IACvC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO;QAA+B,GAAG;YAAE,QAAQ;QAAI;IAChF;AACF"}}]
}