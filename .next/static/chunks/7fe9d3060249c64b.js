(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},23750,10708,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function r({className:e,type:r,...n}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}e.s(["Input",()=>r],23750);var n=e.i(71645),s=e.i(48425),o=n.forwardRef((e,a)=>(0,t.jsx)(s.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function i({className:e,...r}){return(0,t.jsx)(o,{"data-slot":"label",className:(0,a.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}o.displayName="Label",e.s(["Label",()=>i],10708)},75254,e=>{"use strict";var t=e.i(71645);let a=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,t.forwardRef)(({color:e="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:i="",children:l,iconNode:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...r,width:n,height:n,stroke:e,strokeWidth:o?24*Number(s)/Number(n):s,className:a("lucide",i),...d},[...c.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(l)?l:[l]])),s=(e,r)=>{let s=(0,t.forwardRef)(({className:s,...o},i)=>(0,t.createElement)(n,{ref:i,iconNode:r,className:a(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,s),...o}));return s.displayName=`${e}`,s};e.s(["default",()=>s],75254)},77755,e=>{"use strict";e.s(["validateAccountForm",0,e=>{let t={},a=e.get("name");a?.trim()||(t.name="Account name is required");let r=e.get("initial_balance");if(r){let e=parseFloat(r);(isNaN(e)||e<0)&&(t.initial_balance="Please enter a valid positive number")}return{isValid:0===Object.keys(t).length,errors:t}},"validateTransactionForm",0,e=>{let t={},a=e.get("amount");if(a){let e=parseFloat(a);(isNaN(e)||e<=0)&&(t.amount="Please enter a valid positive number")}else t.amount="Amount is required";let r=e.get("reason");r?.trim()||(t.reason="Reason is required");let n=e.get("category");return n?.trim()||(t.category="Category is required"),{isValid:0===Object.keys(t).length,errors:t}}])},30374,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(81140),n=e.i(20783),s=e.i(30030),o=e.i(10772),i=e.i(69340),l=e.i(26330),c=e.i(65491),d=e.i(74606),u=e.i(96626),p=e.i(48425),m=e.i(3536),f=e.i(85369),g=e.i(86312),x=e.i(91918),h="Dialog",[b,v]=(0,s.createContextScope)(h),[j,y]=b(h),w=e=>{let{__scopeDialog:r,children:n,open:s,defaultOpen:l,onOpenChange:c,modal:d=!0}=e,u=a.useRef(null),p=a.useRef(null),[m=!1,f]=(0,i.useControllableState)({prop:s,defaultProp:l,onChange:c});return(0,t.jsx)(j,{scope:r,triggerRef:u,contentRef:p,contentId:(0,o.useId)(),titleId:(0,o.useId)(),descriptionId:(0,o.useId)(),open:m,onOpenChange:f,onOpenToggle:a.useCallback(()=>f(e=>!e),[f]),modal:d,children:n})};w.displayName=h;var C="DialogTrigger";a.forwardRef((e,a)=>{let{__scopeDialog:s,...o}=e,i=y(C,s),l=(0,n.useComposedRefs)(a,i.triggerRef);return(0,t.jsx)(p.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":z(i.open),...o,ref:l,onClick:(0,r.composeEventHandlers)(e.onClick,i.onOpenToggle)})}).displayName=C;var D="DialogPortal",[N,I]=b(D,{forceMount:void 0}),k=e=>{let{__scopeDialog:r,forceMount:n,children:s,container:o}=e,i=y(D,r);return(0,t.jsx)(N,{scope:r,forceMount:n,children:a.Children.map(s,e=>(0,t.jsx)(u.Presence,{present:n||i.open,children:(0,t.jsx)(d.Portal,{asChild:!0,container:o,children:e})}))})};k.displayName=D;var A="DialogOverlay",R=a.forwardRef((e,a)=>{let r=I(A,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=y(A,e.__scopeDialog);return o.modal?(0,t.jsx)(u.Presence,{present:n||o.open,children:(0,t.jsx)(_,{...s,ref:a})}):null});R.displayName=A;var _=a.forwardRef((e,a)=>{let{__scopeDialog:r,...n}=e,s=y(A,r);return(0,t.jsx)(f.RemoveScroll,{as:x.Slot,allowPinchZoom:!0,shards:[s.contentRef],children:(0,t.jsx)(p.Primitive.div,{"data-state":z(s.open),...n,ref:a,style:{pointerEvents:"auto",...n.style}})})}),F="DialogContent",P=a.forwardRef((e,a)=>{let r=I(F,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=y(F,e.__scopeDialog);return(0,t.jsx)(u.Presence,{present:n||o.open,children:o.modal?(0,t.jsx)(O,{...s,ref:a}):(0,t.jsx)(E,{...s,ref:a})})});P.displayName=F;var O=a.forwardRef((e,s)=>{let o=y(F,e.__scopeDialog),i=a.useRef(null),l=(0,n.useComposedRefs)(s,o.contentRef,i);return a.useEffect(()=>{let e=i.current;if(e)return(0,g.hideOthers)(e)},[]),(0,t.jsx)(S,{...e,ref:l,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),o.triggerRef.current?.focus()}),onPointerDownOutside:(0,r.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,r.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),E=a.forwardRef((e,r)=>{let n=y(F,e.__scopeDialog),s=a.useRef(!1),o=a.useRef(!1);return(0,t.jsx)(S,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||n.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,o.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(o.current=!0));let a=t.target;n.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}})}),S=a.forwardRef((e,r)=>{let{__scopeDialog:s,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:d,...u}=e,p=y(F,s),f=a.useRef(null),g=(0,n.useComposedRefs)(r,f);return(0,m.useFocusGuards)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.FocusScope,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:i,onUnmountAutoFocus:d,children:(0,t.jsx)(l.DismissableLayer,{role:"dialog",id:p.contentId,"aria-describedby":p.descriptionId,"aria-labelledby":p.titleId,"data-state":z(p.open),...u,ref:g,onDismiss:()=>p.onOpenChange(!1)})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U,{titleId:p.titleId}),(0,t.jsx)(K,{contentRef:f,descriptionId:p.descriptionId})]})]})}),T="DialogTitle",M=a.forwardRef((e,a)=>{let{__scopeDialog:r,...n}=e,s=y(T,r);return(0,t.jsx)(p.Primitive.h2,{id:s.titleId,...n,ref:a})});M.displayName=T;var B="DialogDescription",$=a.forwardRef((e,a)=>{let{__scopeDialog:r,...n}=e,s=y(B,r);return(0,t.jsx)(p.Primitive.p,{id:s.descriptionId,...n,ref:a})});$.displayName=B;var H="DialogClose",L=a.forwardRef((e,a)=>{let{__scopeDialog:n,...s}=e,o=y(H,n);return(0,t.jsx)(p.Primitive.button,{type:"button",...s,ref:a,onClick:(0,r.composeEventHandlers)(e.onClick,()=>o.onOpenChange(!1))})});function z(e){return e?"open":"closed"}L.displayName=H;var V="DialogTitleWarning",[q,W]=(0,s.createContext)(V,{contentName:F,titleName:T,docsSlug:"dialog"}),U=({titleId:e})=>{let t=W(V),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return a.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},K=({contentRef:e,descriptionId:t})=>{let r=W("DialogDescriptionWarning"),n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return a.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null};let Z=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var G=e.i(47163);function X({...e}){return(0,t.jsx)(w,{"data-slot":"dialog",...e})}function Y({...e}){return(0,t.jsx)(k,{"data-slot":"dialog-portal",...e})}function J({className:e,...a}){return(0,t.jsx)(R,{"data-slot":"dialog-overlay",className:(0,G.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function Q({className:e,children:a,showCloseButton:r=!0,...n}){return(0,t.jsxs)(Y,{"data-slot":"dialog-portal",children:[(0,t.jsx)(J,{}),(0,t.jsxs)(P,{"data-slot":"dialog-content",className:(0,G.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[a,r&&(0,t.jsxs)(L,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(Z,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ee({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,G.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function et({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,G.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function ea({className:e,...a}){return(0,t.jsx)(M,{"data-slot":"dialog-title",className:(0,G.cn)("text-lg leading-none font-semibold",e),...a})}function er({className:e,...a}){return(0,t.jsx)($,{"data-slot":"dialog-description",className:(0,G.cn)("text-muted-foreground text-sm",e),...a})}e.s(["Dialog",()=>X,"DialogContent",()=>Q,"DialogDescription",()=>er,"DialogFooter",()=>et,"DialogHeader",()=>ee,"DialogTitle",()=>ea],30374)},65358,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(67881),n=e.i(70065),s=e.i(23750),o=e.i(10708),i=e.i(46696),l=e.i(75254);let c=(0,l.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),d=(0,l.default)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);var u=e.i(18566),p=e.i(30374),m=e.i(20755),f=e.i(77755);function g({accounts:e,defaultAccountId:l}){(0,u.useRouter)();let[g,x]=(0,a.useState)({open:!1,accountId:null}),[h,b]=(0,a.useState)({}),v=(0,a.useRef)(null),{accounts:j,defaultAccountId:y,isCreating:w,isSettingDefault:C,createAccount:D,deleteAccount:N,setDefaultAccount:I,setAccounts:k,setDefaultAccountId:A}=((e,t)=>{let r=(0,m.createClient)(),[n,s]=(0,a.useState)(e),[o,l]=(0,a.useState)(t),[c,d]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=r.channel("accounts-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"accounts"},e=>{let t=e.new;s(e=>[...e,t])}).on("postgres_changes",{event:"DELETE",schema:"public",table:"accounts"},e=>{let t=e.old.id;s(e=>e.filter(e=>e.id!==t)),o===t&&l(null)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"users"},e=>{e.new.default_account_id!==o&&l(e.new.default_account_id)}).subscribe();return()=>{r.removeChannel(e)}},[r,o]);let f=async e=>{if(!c){d(!0);try{let t=await fetch("/api/accounts/create",{method:"POST",body:e}),a=await t.json();if(!t.ok||!a.success)return i.toast.error(a.error||"Failed to create account"),{success:!1,error:a.error};return i.toast.success("Account created successfully"),s(e=>[...e,a.data]),0===n.length&&l(a.data.id),{success:!0,data:a.data}}catch(e){return i.toast.error("An unexpected error occurred"),{success:!1,error:"An unexpected error occurred"}}finally{d(!1)}}},g=async e=>{try{let t=new FormData;t.append("accountId",e);let a=await fetch("/api/accounts/delete",{method:"POST",body:t}),r=await a.json();if(!a.ok||!r.success)return i.toast.error(r.error||"Failed to delete account"),{success:!1,error:r.error};return i.toast.success("Account deleted successfully"),s(t=>t.filter(t=>t.id!==e)),o===e&&l(null),{success:!0}}catch(e){return i.toast.error("An unexpected error occurred"),{success:!1,error:"An unexpected error occurred"}}},x=async e=>{if(u!==e){p(e);try{let t=new FormData;t.append("accountId",e);let a=await fetch("/api/accounts/set-default",{method:"POST",body:t}),r=await a.json();if(!a.ok||!r.success)return i.toast.error(r.error||"Failed to set default account"),{success:!1,error:r.error};return i.toast.success("Default account updated successfully"),l(e),{success:!0}}catch(e){return i.toast.error("An unexpected error occurred"),{success:!1,error:"An unexpected error occurred"}}finally{p(null)}}};return{accounts:n,defaultAccountId:o,isCreating:c,isSettingDefault:u,createAccount:f,deleteAccount:g,setDefaultAccount:x,setAccounts:s,setDefaultAccountId:l}})(e,l),R=async e=>{let t;if(b((t=(0,f.validateAccountForm)(e)).errors),!t.isValid)return void i.toast.error("Please fix the errors below");let a=await D(e);a&&a.success&&v.current&&(v.current.reset(),b({}))},_=async()=>{let e=g.accountId;if(!e)return;let t=await N(e);t&&t.success&&x({open:!1,accountId:null})},F=async e=>{let t=await I(e);t&&t.success};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Manage Accounts"}),(0,t.jsx)(n.CardDescription,{children:"Create and manage your financial accounts"})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[j.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Initial Balance: $",(e.initial_balance||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.id===y&&(0,t.jsx)("span",{className:"inline-flex items-center rounded-full bg-indigo-100 px-2.5 py-0.5 text-xs font-medium text-indigo-800",children:"Default"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Button,{onClick:()=>F(e.id),variant:e.id===y?"default":"outline",size:"sm",disabled:e.id===y||C===e.id,children:C===e.id?"Setting...":e.id===y?"Default":"Set Default"}),(0,t.jsx)(r.Button,{onClick:()=>x({open:!0,accountId:e.id}),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",disabled:null!==C,children:(0,t.jsx)(d,{className:"h-4 w-4"})})]})]},e.id)),0===j.length&&(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,t.jsx)("p",{children:"You don't have any accounts yet."})})]})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Create New Account"}),(0,t.jsx)(n.CardDescription,{children:"Add a new financial account"})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("form",{ref:v,action:R,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"name",children:"Account Name"}),(0,t.jsx)(s.Input,{id:"name",name:"name",placeholder:"e.g., Checking Account, Savings Account",className:h.name?"border-red-500":"",onChange:()=>{h.name&&b(e=>({...e,name:void 0}))}}),h.name&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:h.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.Label,{htmlFor:"initial_balance",children:"Initial Balance"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-lg text-muted-foreground",children:"$"}),(0,t.jsx)(s.Input,{id:"initial_balance",name:"initial_balance",type:"number",placeholder:"0.00",className:`pl-8 ${h.initial_balance?"border-red-500":""}`,step:"0.01",min:"0",onChange:()=>{h.initial_balance&&b(e=>({...e,initial_balance:void 0}))}}),h.initial_balance&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:h.initial_balance})]})]}),(0,t.jsx)(r.Button,{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700",disabled:w,children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Creating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c,{className:"mr-2 h-4 w-4"}),"Create Account"]})})]})})]}),(0,t.jsx)(p.Dialog,{open:g.open,onOpenChange:e=>x({open:e,accountId:null}),children:(0,t.jsxs)(p.DialogContent,{children:[(0,t.jsxs)(p.DialogHeader,{children:[(0,t.jsx)(p.DialogTitle,{children:"Confirm Deletion"}),(0,t.jsx)(p.DialogDescription,{children:"Are you sure you want to delete this account? This action cannot be undone and all associated transactions will be permanently deleted."})]}),(0,t.jsxs)(p.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>x({open:!1,accountId:null}),children:"Cancel"}),(0,t.jsx)(r.Button,{variant:"destructive",onClick:_,children:"Delete"})]})]})})]})}e.s(["AccountsClient",()=>g],65358)}]);