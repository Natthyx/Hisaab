(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49845,e=>{"use strict";var t=e.i(43476),a=e.i(75254);let r=(0,a.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),s=(0,a.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var n=e.i(63178),l=e.i(67881);function i(){let{theme:e,setTheme:a}=(0,n.useTheme)();return(0,t.jsxs)(l.Button,{variant:"ghost",size:"icon",onClick:()=>a("dark"===e?"light":"dark"),"aria-label":"Toggle theme",children:[(0,t.jsx)(s,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,t.jsx)(r,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]})}e.s(["ThemeToggle",()=>i],49845)},70065,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function s({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>i,"CardDescription",()=>l,"CardHeader",()=>s,"CardTitle",()=>n])},23750,10708,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function r({className:e,type:r,...s}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>r],23750);var s=e.i(71645),n=e.i(48425),l=s.forwardRef((e,a)=>(0,t.jsx)(n.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function i({className:e,...r}){return(0,t.jsx)(l,{"data-slot":"label",className:(0,a.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}l.displayName="Label",e.s(["Label",()=>i],10708)},61653,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["default",()=>t])},77755,e=>{"use strict";e.s(["validateAccountForm",0,e=>{let t={},a=e.get("name");a?.trim()||(t.name="Account name is required");let r=e.get("initial_balance");if(r){let e=parseFloat(r);(isNaN(e)||e<0)&&(t.initial_balance="Please enter a valid positive number")}return{isValid:0===Object.keys(t).length,errors:t}},"validateTransactionForm",0,e=>{let t={},a=e.get("amount");if(a){let e=parseFloat(a);(isNaN(e)||e<=0)&&(t.amount="Please enter a valid positive number")}else t.amount="Amount is required";let r=e.get("reason");r?.trim()||(t.reason="Reason is required");let s=e.get("category");return s?.trim()||(t.category="Category is required"),{isValid:0===Object.keys(t).length,errors:t}}])},37393,e=>{"use strict";var t=e.i(43476),a=e.i(67881),r=e.i(23750),s=e.i(10708),n=e.i(70065),l=e.i(62870),i=e.i(84762),d=e.i(61653),d=d,o=e.i(25913),c=e.i(47163);let u=(0,o.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function m({className:e,variant:a,...r}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,c.cn)(u({variant:a}),e),...r})}function x({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-title",className:(0,c.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...a})}function h({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,c.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...a})}function p({title:e="Error",message:a,className:r}){return(0,t.jsxs)(m,{variant:"destructive",className:r,children:[(0,t.jsx)(d.default,{className:"h-4 w-4"}),(0,t.jsx)(x,{children:e}),(0,t.jsx)(h,{children:a})]})}var g=e.i(99833),v=e.i(47697),f=e.i(71645),j=e.i(18566),y=e.i(46696),b=e.i(77755);function N({accounts:e,defaultAccountId:d}){let o=(0,j.useRouter)(),{amount:c,reason:u,type:m,category:x,date:h,accountId:N,loading:C,errors:S,accounts:w,setType:k,setDate:T,handleAmountChange:F,handleReasonChange:I,handleCategoryChange:A,handleAccountChange:D,handleSubmit:P}=function(e,t){let a=(0,j.useRouter)(),[r,s]=(0,f.useState)(""),[n,l]=(0,f.useState)(""),[i,d]=(0,f.useState)("expense"),[o,c]=(0,f.useState)(""),[u,m]=(0,f.useState)(""),[x,h]=(0,f.useState)(""),[p,g]=(0,f.useState)(!1),[v,N]=(0,f.useState)({});(0,f.useEffect)(()=>{e.length>0&&(t?h(t):h(e[0].id))},[e,t]);let C=()=>{let t=new FormData;t.append("amount",r),t.append("reason",n),t.append("category",o);let a={...(0,b.validateTransactionForm)(t).errors};return e.length>1&&!x&&(a.accountId="Please select an account"),N(a),0===Object.keys(a).length},S=async e=>{if(e.preventDefault(),!C())throw y.toast.error("Please fix the errors below"),Error("Form validation failed");g(!0);try{let e=new FormData;e.append("amount",r),e.append("reason",n),e.append("type",i),e.append("category",o);let t=u||new Date().toISOString().split("T")[0];e.append("date",t),x&&e.append("accountId",x);let s=await fetch("/api/transactions/create",{method:"POST",body:e}),l=await s.json();if(!s.ok||!l.success)throw y.toast.error(l.error||"Failed to add transaction"),g(!1),Error(l.error||"Failed to add transaction");y.toast.success("Transaction added successfully"),a.push("/transactions")}catch(e){throw y.toast.error("An unexpected error occurred"),g(!1),e}};return{amount:r,reason:n,type:i,category:o,date:u,accountId:x,loading:p,errors:v,accounts:e,setType:d,setDate:m,handleAmountChange:e=>{s(e),v.amount&&N(e=>({...e,amount:void 0}))},handleReasonChange:e=>{l(e),v.reason&&N(e=>({...e,reason:void 0}))},handleCategoryChange:e=>{c(e),v.category&&N(e=>({...e,category:void 0}))},handleAccountChange:e=>{h(e),v.accountId&&N(e=>({...e,accountId:void 0}))},handleSubmit:S,validateForm:C}}(e,d),[V,L]=(0,f.useState)(null);(0,f.useEffect)(()=>{L(null)},[c,u,m,x,h,N]);let M=async e=>{e.preventDefault(),L(null);try{await P(e)}catch(e){L(e.message||"Failed to add transaction. Please try again.")}};return(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"Transaction Details"})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("form",{onSubmit:M,className:"space-y-6",children:[V&&(0,t.jsx)(p,{title:"Transaction Error",message:V}),e.length>1&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"account",children:"Account"}),(0,t.jsxs)(l.Select,{value:N,onValueChange:D,children:[(0,t.jsx)(l.SelectTrigger,{id:"account",className:S.accountId?"border-red-500":"",children:(0,t.jsx)(l.SelectValue,{placeholder:"Select an account"})}),(0,t.jsx)(l.SelectContent,{children:e.map(e=>(0,t.jsx)(l.SelectItem,{value:e.id,children:e.name},e.id))})]}),S.accountId&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:S.accountId})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"type",children:"Type"}),(0,t.jsxs)(l.Select,{value:m,onValueChange:e=>k(e),children:[(0,t.jsx)(l.SelectTrigger,{id:"type",children:(0,t.jsx)(l.SelectValue,{})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"income",children:"Income"}),(0,t.jsx)(l.SelectItem,{value:"expense",children:"Expense"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"amount",children:"Amount"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-lg text-muted-foreground",children:"$"}),(0,t.jsx)(r.Input,{id:"amount",type:"number",placeholder:"0.00",value:c,onChange:e=>F(e.target.value),className:`pl-8 ${S.amount?"border-red-500":""}`,min:"0",step:"0.01"}),S.amount&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:S.amount})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"category",children:"Category"}),(0,t.jsxs)(l.Select,{value:x,onValueChange:A,children:[(0,t.jsx)(l.SelectTrigger,{id:"category",className:S.category?"border-red-500":"",children:(0,t.jsx)(l.SelectValue,{placeholder:"Select a category"})}),(0,t.jsx)(l.SelectContent,{children:g.categories.map(e=>(0,t.jsx)(l.SelectItem,{value:e,children:e},e))})]}),S.category&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:S.category})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"reason",children:"Reason"}),(0,t.jsx)(i.Textarea,{id:"reason",placeholder:"What was this transaction for?",value:u,onChange:e=>I(e.target.value),className:S.reason?"border-red-500":"",rows:3}),S.reason&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:S.reason})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(s.Label,{htmlFor:"date",children:"Date"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.CalendarIcon,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(r.Input,{id:"date",type:"date",value:h,onChange:e=>T(e.target.value),className:"pl-10"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:h?"Selected date will be used":"No date selected - today's date will be used"})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(a.Button,{type:"button",variant:"outline",className:"flex-1",onClick:()=>o.back(),disabled:C,children:"Cancel"}),(0,t.jsx)(a.Button,{type:"submit",className:"flex-1 bg-indigo-600 hover:bg-indigo-700",disabled:C||e.length>1&&!N,children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Adding..."]}):"Add Transaction"})]})]})})]})}e.s(["AddTransactionClient",()=>N],37393)}]);