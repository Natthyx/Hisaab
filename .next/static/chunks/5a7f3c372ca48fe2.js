(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},75254,e=>{"use strict";var a=e.i(71645);let t=(...e)=>e.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=(0,a.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:l="",children:d,iconNode:o,...c},u)=>(0,a.createElement)("svg",{ref:u,...s,width:r,height:r,stroke:e,strokeWidth:n?24*Number(i)/Number(r):i,className:t("lucide",l),...c},[...o.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(d)?d:[d]])),i=(e,s)=>{let i=(0,a.forwardRef)(({className:i,...n},l)=>(0,a.createElement)(r,{ref:l,iconNode:s,className:t(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i),...n}));return i.displayName=`${e}`,i};e.s(["default",()=>i],75254)},23750,10708,e=>{"use strict";var a=e.i(43476),t=e.i(47163);function s({className:e,type:s,...r}){return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>s],23750);var r=e.i(71645),i=e.i(48425),n=r.forwardRef((e,t)=>(0,a.jsx)(i.Primitive.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));function l({className:e,...s}){return(0,a.jsx)(n,{"data-slot":"label",className:(0,t.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}n.displayName="Label",e.s(["Label",()=>l],10708)},44345,e=>{"use strict";var a=e.i(20755);async function t(e,t){let s=(0,a.createClient)(),{data:r,error:i}=await s.auth.signInWithPassword({email:e,password:t});if(i)throw Error(i.message);return r}async function s(e,t){let s=(0,a.createClient)(),{data:r,error:i}=await s.auth.signUp({email:e,password:t});if(i)throw Error(i.message);if(r.user){let e=await fetch("/api/auth/create-profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r.user.id,email:r.user.email})}),a=await e.json();if(!e.ok||!a.success)throw Error(a.error||"Failed to create user profile")}return r}async function r(e,t){let s=(0,a.createClient)(),r=new FormData;r.append("full_name",t);let i=await fetch("/api/users/update",{method:"POST",body:r}),n=await i.json();if(!i.ok||!n.success)throw Error(n.error||"Failed to update profile");let{error:l}=await s.auth.updateUser({data:{full_name:t,display_name:t}});if(l)throw Error("Profile updated in database but failed to update display name");return n}async function i(e,t,s){let r=(0,a.createClient)(),{data:i,error:n}=await r.auth.signInWithPassword({email:e,password:t});if(n)throw Error("Current password is incorrect");let{error:l}=await r.auth.updateUser({password:s});if(l)throw Error(l.message||"Failed to update password");return{success:!0}}async function n(e){let t=(0,a.createClient)(),{data:s,error:r}=await t.from("users").select("full_name").eq("id",e).single();if(r)throw Error(r.message);return s}e.s(["changePassword",()=>i,"fetchUserProfile",()=>n,"signInWithEmailAndPassword",()=>t,"signUpWithEmailAndPassword",()=>s,"updateProfile",()=>r])},2153,e=>{"use strict";var a=e.i(43476),t=e.i(94220),s=e.i(49845),r=e.i(67881),i=e.i(70065),n=e.i(23750),l=e.i(10708),d=e.i(44345),o=e.i(11788),c=e.i(75254);let u=(0,c.default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),m=(0,c.default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),h=(0,c.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),p=(0,c.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),f=(0,c.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var x=e.i(18566),j=e.i(71645),g=e.i(20755),y=e.i(46696);function w(){let e=(0,x.useRouter)(),c=(0,g.createClient)(),[w,v]=(0,j.useState)(null),[b,N]=(0,j.useState)([]),[C,P]=(0,j.useState)(""),[k,_]=(0,j.useState)(!1),[E,S]=(0,j.useState)(""),[A,D]=(0,j.useState)(""),[T,L]=(0,j.useState)(""),[O,F]=(0,j.useState)(!1);(0,j.useEffect)(()=>{(async()=>{try{let{data:{user:a}}=await c.auth.getUser();if(!a)return void e.push("/login");v(a);try{let e=await (0,d.fetchUserProfile)(a.id);e?P(e.full_name||""):a.user_metadata?.full_name&&P(a.user_metadata.full_name)}catch(e){a.user_metadata?.full_name&&P(a.user_metadata.full_name)}try{let{data:e,error:t}=await c.from("accounts").select("id, name, initial_balance, created_at").eq("user_id",a.id).order("name");if(t)throw Error(t.message);N(e||[])}catch(e){y.toast.error("Failed to load accounts")}}catch(e){y.toast.error("An unexpected error occurred")}})()},[e,c]);let I=async e=>{e.preventDefault(),_(!0);try{await (0,d.updateProfile)(w.id,C),y.toast.success("Profile updated successfully")}catch(e){y.toast.error(e.message||"An unexpected error occurred")}finally{_(!1)}},U=async e=>{if(e.preventDefault(),A!==T)return void y.toast.error("New passwords do not match");if(A.length<6)return void y.toast.error("Password must be at least 6 characters long");F(!0);try{await (0,d.changePassword)(w.email,E,A),S(""),D(""),L(""),y.toast.success("Password updated successfully")}catch(e){y.toast.error(e.message||"An unexpected error occurred")}finally{F(!1)}},B=async()=>{await fetch("/api/auth/signout",{method:"POST"}),e.push("/login")};return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col md:flex-row",children:[(0,a.jsx)(t.Navigation,{}),(0,a.jsx)("main",{className:"flex-1 p-4 pb-20 md:ml-64 md:p-8 md:pb-8",children:(0,a.jsxs)("div",{className:"mx-auto max-w-4xl space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Profile Settings"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(s.ThemeToggle,{})})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.UserIcon,{className:"h-5 w-5"}),"Personal Information"]}),(0,a.jsx)(i.CardDescription,{children:"Update your personal details and contact information"})]}),(0,a.jsx)(i.CardContent,{className:"space-y-4",children:(0,a.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"full_name",children:"Full Name"}),(0,a.jsx)(n.Input,{id:"full_name",placeholder:"Your full name",value:C,onChange:e=>P(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"email",children:"Email Address"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(n.Input,{id:"email",type:"email",placeholder:"your.email@example.com",value:w?.email||"",className:"pl-10",readOnly:!0})]})]}),(0,a.jsx)(r.Button,{type:"submit",disabled:k,children:k?"Updating...":"Update Information"})]})})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(p,{className:"h-5 w-5"}),"Security"]}),(0,a.jsx)(i.CardDescription,{children:"Manage your password and security preferences"})]}),(0,a.jsx)(i.CardContent,{className:"space-y-4",children:(0,a.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"current-password",children:"Current Password"}),(0,a.jsx)(n.Input,{id:"current-password",type:"password",value:E,onChange:e=>S(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"new-password",children:"New Password"}),(0,a.jsx)(n.Input,{id:"new-password",type:"password",value:A,onChange:e=>D(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{htmlFor:"confirm-password",children:"Confirm New Password"}),(0,a.jsx)(n.Input,{id:"confirm-password",type:"password",value:T,onChange:e=>L(e.target.value),required:!0})]}),(0,a.jsx)(r.Button,{type:"submit",disabled:O,children:O?"Changing...":"Change Password"})]})})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{className:"h-5 w-5"}),"Notifications"]}),(0,a.jsx)(i.CardDescription,{children:"Configure how you receive notifications"})]}),(0,a.jsx)(i.CardContent,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Email Notifications"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive updates via email"})]}),(0,a.jsx)(r.Button,{variant:"outline",size:"sm",children:"Enable"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Push Notifications"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive push notifications"})]}),(0,a.jsx)(r.Button,{variant:"outline",size:"sm",children:"Enable"})]})]})})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{className:"h-5 w-5"}),"Your Accounts"]}),(0,a.jsx)(i.CardDescription,{children:"Manage your financial accounts"})]}),(0,a.jsx)(i.CardContent,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[b.map(t=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:t.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Balance: $",t.initial_balance.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,a.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>e.push("/accounts"),children:"Manage"})]},t.id)),0===b.length&&(0,a.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:(0,a.jsx)("p",{children:"You don't have any accounts yet."})}),(0,a.jsx)(r.Button,{className:"w-full",onClick:()=>e.push("/accounts"),children:"Manage All Accounts"})]})})]})]}),(0,a.jsxs)(i.Card,{className:"border-destructive",children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsx)(i.CardTitle,{className:"text-destructive",children:"Danger Zone"}),(0,a.jsx)(i.CardDescription,{children:"Permanently delete your account and all associated data"})]}),(0,a.jsx)(i.CardContent,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Delete Account"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Once you delete your account, there is no going back. Please be certain."})]}),(0,a.jsxs)(r.Button,{variant:"destructive",onClick:B,children:[(0,a.jsx)(h,{className:"mr-2 h-4 w-4"}),"Log Out"]})]})})]})]})})]})}e.s(["default",()=>w],2153)}]);