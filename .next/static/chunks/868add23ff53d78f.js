(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23750,10708,e=>{"use strict";var a=e.i(43476),r=e.i(47163);function s({className:e,type:s,...t}){return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...t})}e.s(["Input",()=>s],23750);var t=e.i(71645),i=e.i(48425),o=t.forwardRef((e,r)=>(0,a.jsx)(i.Primitive.label,{...e,ref:r,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));function n({className:e,...s}){return(0,a.jsx)(o,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}o.displayName="Label",e.s(["Label",()=>n],10708)},44345,e=>{"use strict";var a=e.i(20755);async function r(e,r){let s=(0,a.createClient)(),{data:t,error:i}=await s.auth.signInWithPassword({email:e,password:r});if(i)throw Error(i.message);return t}async function s(e,r){let s=(0,a.createClient)(),{data:t,error:i}=await s.auth.signUp({email:e,password:r});if(i)throw Error(i.message);if(t.user){let e=await fetch("/api/auth/create-profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.user.id,email:t.user.email})}),a=await e.json();if(!e.ok||!a.success)throw Error(a.error||"Failed to create user profile")}return t}async function t(e,r){let s=(0,a.createClient)(),t=new FormData;t.append("full_name",r);let i=await fetch("/api/users/update",{method:"POST",body:t}),o=await i.json();if(!i.ok||!o.success)throw Error(o.error||"Failed to update profile");let{error:n}=await s.auth.updateUser({data:{full_name:r,display_name:r}});if(n)throw Error("Profile updated in database but failed to update display name");return o}async function i(e,r,s){let t=(0,a.createClient)(),{data:i,error:o}=await t.auth.signInWithPassword({email:e,password:r});if(o)throw Error("Current password is incorrect");let{error:n}=await t.auth.updateUser({password:s});if(n)throw Error(n.message||"Failed to update password");return{success:!0}}async function o(e){let r=(0,a.createClient)(),{data:s,error:t}=await r.from("users").select("full_name").eq("id",e).single();if(t)throw Error(t.message);return s}e.s(["changePassword",()=>i,"fetchUserProfile",()=>o,"signInWithEmailAndPassword",()=>r,"signUpWithEmailAndPassword",()=>s,"updateProfile",()=>t])},38354,e=>{"use strict";function a(e,a){let r={};return e?/\S+@\S+\.\S+/.test(e)||(r.email="Email address is invalid"):r.email="Email is required",a?a.length<6&&(r.password="Password must be at least 6 characters"):r.password="Password is required",{isValid:0===Object.keys(r).length,errors:r}}function r(e,a,r){let s={};return e?/\S+@\S+\.\S+/.test(e)||(s.email="Email address is invalid"):s.email="Email is required",a?a.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",r?a!==r&&(s.confirmPassword="Passwords do not match"):s.confirmPassword="Please confirm your password",{isValid:0===Object.keys(s).length,errors:s}}e.s(["validateLoginForm",()=>a,"validateSignupForm",()=>r])},82306,e=>{"use strict";var a=e.i(43476),r=e.i(71645),s=e.i(18566),t=e.i(67881),i=e.i(23750),o=e.i(10708),n=e.i(70065),l=e.i(20755),d=e.i(46696),c=e.i(38354),u=e.i(44345);function m(){let e=(0,s.useRouter)(),[m,p]=(0,r.useState)(""),[f,h]=(0,r.useState)(""),[w,x]=(0,r.useState)(""),[g,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),[j,P]=(0,r.useState)({});(0,l.createClient)();let C=async e=>{e.preventDefault();let a=(0,c.validateSignupForm)(m,f,w);if(!a.isValid){P(a.errors),d.toast.error("Please fix the errors below");return}b(!0);try{await (0,u.signUpWithEmailAndPassword)(m,f),d.toast.success("Account created successfully! Please check your email for confirmation."),v(!0),b(!1)}catch(e){d.toast.error(e.message||"An unexpected error occurred. Please try again."),b(!1)}};return y?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-indigo-50 to-white p-4",children:(0,a.jsxs)(n.Card,{className:"w-full max-w-md",children:[(0,a.jsxs)(n.CardHeader,{className:"space-y-1",children:[(0,a.jsx)(n.CardTitle,{className:"text-3xl font-bold text-center",children:"Check Your Email"}),(0,a.jsxs)(n.CardDescription,{className:"text-center",children:["We've sent a confirmation link to ",m]})]}),(0,a.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-center text-muted-foreground",children:"Please check your email and click the confirmation link to verify your account. After verification, you'll be able to log in and set up your initial balance."}),(0,a.jsx)(t.Button,{className:"w-full bg-indigo-600 hover:bg-indigo-700",onClick:()=>e.push("/login"),children:"Go to Login"})]})]})}):(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-indigo-50 to-white p-4",children:(0,a.jsxs)(n.Card,{className:"w-full max-w-md",children:[(0,a.jsxs)(n.CardHeader,{className:"space-y-1",children:[(0,a.jsx)(n.CardTitle,{className:"text-3xl font-bold text-center",children:"Hisaab"}),(0,a.jsx)(n.CardDescription,{className:"text-center",children:"Create an account to manage your expenses"})]}),(0,a.jsx)(n.CardContent,{children:(0,a.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.Label,{htmlFor:"email",children:"Email"}),(0,a.jsx)(i.Input,{id:"email",type:"email",placeholder:"you@example.com",value:m,onChange:e=>{p(e.target.value),j.email&&P(e=>({...e,email:void 0}))},className:j.email?"border-red-500":""}),j.email&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:j.email})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.Label,{htmlFor:"password",children:"Password"}),(0,a.jsx)(i.Input,{id:"password",type:"password",placeholder:"••••••••",value:f,onChange:e=>{h(e.target.value),j.password&&P(e=>({...e,password:void 0}))},className:j.password?"border-red-500":""}),j.password&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:j.password})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.Label,{htmlFor:"confirm-password",children:"Confirm Password"}),(0,a.jsx)(i.Input,{id:"confirm-password",type:"password",placeholder:"••••••••",value:w,onChange:e=>{x(e.target.value),j.confirmPassword&&P(e=>({...e,confirmPassword:void 0}))},className:j.confirmPassword?"border-red-500":""}),j.confirmPassword&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:j.confirmPassword})]}),(0,a.jsx)(t.Button,{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700",disabled:g,children:g?"Creating account...":"Sign Up"}),(0,a.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",(0,a.jsx)("button",{type:"button",onClick:()=>e.push("/login"),className:"text-indigo-600 hover:underline",disabled:g,children:"Sign in"})]})]})})]})})}e.s(["default",()=>m])}]);