{"version":3,"sources":["../../../../components/analytics/client.tsx/__nextjs-internal-proxy.mjs","../../../../app/analytics/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AnalyticsClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call AnalyticsClient() from the server but AnalyticsClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/analytics/client.tsx\",\n    \"AnalyticsClient\",\n);\n","import { Navigation } from \"@/components/layout/navigation\"\nimport { ThemeToggle } from '@/components/layout/theme-toggle'\nimport { PlusIcon } from 'lucide-react'\nimport Link from \"next/link\"\nimport { Button } from '@/components/ui/button'\nimport { createClient } from '@/lib/supabase/server'\nimport { redirect } from 'next/navigation'\nimport { AnalyticsClient } from \"@/components/analytics/client\"\nimport { getAccountTransactions } from \"@/lib/transactions/service\"\nimport { getUserAccounts, getUserDefaultAccount } from \"@/lib/accounts/service\"\n\n\nexport default async function AnalyticsPage(props: { searchParams: Promise<{ account?: string }> }) {\n  const searchParams = await props.searchParams\n  const supabase = await createClient()\n  \n  // Get user data\n  const { data: { user } } = await supabase.auth.getUser()\n  \n  if (!user) {\n    redirect('/login')\n  }\n  \n  // Get user's accounts using the service function\n  const accounts = await getUserAccounts(user.id)\n  \n  // Determine which account to show\n  let selectedAccountId = searchParams.account\n  \n  // If no account specified, use user's default account or first account\n  if (!selectedAccountId && accounts && accounts.length > 0) {\n    // Get user's default account using the service function\n    const userData = await getUserDefaultAccount(user.id)\n    \n    if (userData?.default_account_id) {\n      selectedAccountId = userData.default_account_id\n    } else {\n      selectedAccountId = accounts[0].id\n    }\n  }\n  \n  // Get selected account details\n  const selectedAccount = selectedAccountId \n    ? accounts?.find(account => account.id === selectedAccountId) || accounts?.[0]\n    : accounts?.[0]\n  \n  // Get transactions for the selected account using the service function\n  const transactions = selectedAccountId \n    ? await getAccountTransactions(selectedAccountId) \n    : []\n  \n  // Get account's initial balance\n  const initialBalance = selectedAccount?.initial_balance || 0\n  \n  return (\n    <div className=\"flex min-h-screen flex-col md:flex-row\">\n      <Navigation />\n      <main className=\"flex-1 p-4 pb-20 md:ml-64 md:p-8 md:pb-8\">\n        <div className=\"mx-auto max-w-6xl space-y-6\">\n          <div className=\"flex items-center justify-between\">\n            <h1 className=\"text-3xl font-bold\">Analytics</h1>\n            <div className=\"flex items-center gap-2\">\n              <ThemeToggle />\n              <Link href=\"/add\">\n                <Button className=\"bg-indigo-600 hover:bg-indigo-700\">\n                  <PlusIcon className=\"mr-2 h-4 w-4\" />\n                  <span className=\"hidden sm:inline\">Add Transaction</span>\n                </Button>\n              </Link>\n            </div>\n          </div>\n          \n          <AnalyticsClient \n            transactions={transactions || []}\n            initialBalance={initialBalance}\n            accounts={accounts || []}\n            selectedAccount={selectedAccount}\n          />\n        </div>\n      </main>\n    </div>\n  )\n}"],"names":[],"mappings":"oUAEO,IAAM,EAAkB,CAAA,EAAA,AAD/B,EAAA,CAAA,CAAA,OAC+B,uBAAA,AAAuB,EAClD,WAAa,MAAM,AAAI,MAAM,4OAA8O,EAC3Q,gEACA,wEAHG,IAAM,EAAkB,CAAA,EAAA,AAD/B,EAAA,CAAA,CAAA,OAC+B,uBAAA,AAAuB,EAClD,WAAa,MAAM,AAAI,MAAM,4OAA8O,EAC3Q,4CACA,+ICLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAGe,eAAe,EAAc,CAAsD,EAChG,IAAM,EAAe,MAAM,EAAM,YAAY,CACvC,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAG7B,CAAE,KAAM,MAAE,CAAI,CAAE,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,EAElD,CAAC,GACH,CAAA,EADS,AACT,EAAA,QAAA,AAAQ,EAAC,UAIX,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,eAAA,AAAe,EAAC,EAAK,EAAE,EAG1C,EAAoB,EAAa,OAAO,CAG5C,GAAI,CAAC,GAAqB,GAAY,EAAS,MAAM,CAAG,EAAG,CAEzD,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,qBAAqB,AAArB,EAAsB,EAAK,EAAE,EAGlD,EADE,GAAU,mBACQ,CADY,CACH,kBAAkB,CAE3B,CAAQ,CAAC,EAAE,CAAC,EAAE,AAEtC,CAGA,IAAM,EAAkB,GACpB,GAAU,KAAK,GAAW,EAAQ,EAAE,GAAK,IAAsB,GAAU,CAAC,EAAE,CAI1E,EAHF,AAGiB,EACjB,MAAM,CAAA,CAJI,CAAC,AAIL,EAJO,AAIP,sBAAA,AAAsB,EAAC,GAC7B,EAAE,CAGA,EAAiB,GAAiB,iBAAmB,EAE3D,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAA,GACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oDACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,cACnC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAA,GACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,gBACT,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,8CAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,iBACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4BAAmB,+BAM3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CACd,aAAc,GAAgB,EAAE,CAChC,eAAgB,EAChB,SAAU,GAAY,EAAE,CACxB,gBAAiB,WAM7B","ignoreList":[0]}