module.exports=[53413,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ExpenseChart() from the server but ExpenseChart is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/analytics/expense-chart.tsx <module evaluation>","ExpenseChart");a.s(["ExpenseChart",0,b])},76921,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ExpenseChart() from the server but ExpenseChart is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/analytics/expense-chart.tsx","ExpenseChart");a.s(["ExpenseChart",0,b])},33418,a=>{"use strict";a.i(53413);var b=a.i(76921);a.n(b)},12512,a=>{"use strict";var b=a.i(11857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Tabs() from the server but Tabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/tabs.tsx <module evaluation>","Tabs"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsContent() from the server but TabsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/tabs.tsx <module evaluation>","TabsContent"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsList() from the server but TabsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/tabs.tsx <module evaluation>","TabsList"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsTrigger() from the server but TabsTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/tabs.tsx <module evaluation>","TabsTrigger");a.s(["Tabs",0,c,"TabsContent",0,d,"TabsList",0,e,"TabsTrigger",0,f])},45362,a=>{"use strict";var b=a.i(11857);let c=(0,b.registerClientReference)(function(){throw Error("Attempted to call Tabs() from the server but Tabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/tabs.tsx","Tabs"),d=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsContent() from the server but TabsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/tabs.tsx","TabsContent"),e=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsList() from the server but TabsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/tabs.tsx","TabsList"),f=(0,b.registerClientReference)(function(){throw Error("Attempted to call TabsTrigger() from the server but TabsTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/ui/tabs.tsx","TabsTrigger");a.s(["Tabs",0,c,"TabsContent",0,d,"TabsList",0,e,"TabsTrigger",0,f])},96690,a=>{"use strict";a.i(12512);var b=a.i(45362);a.n(b)},6369,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DateFilter() from the server but DateFilter is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/dashboard/date-filter.tsx <module evaluation>","DateFilter");a.s(["DateFilter",0,b])},84289,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DateFilter() from the server but DateFilter is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/dashboard/date-filter.tsx","DateFilter");a.s(["DateFilter",0,b])},95987,a=>{"use strict";a.i(6369);var b=a.i(84289);a.n(b)},80463,a=>{"use strict";var b=a.i(7997),c=a.i(32868),d=a.i(82248);function e({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,d.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...c})}function f({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,d.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...c})}function g({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,d.cn)("leading-none font-semibold",a),...c})}function h({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,d.cn)("px-6",a),...c})}var i=a.i(1269);let j=(0,i.default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),k=(0,i.default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);function l({balance:a,income:c,expense:d}){return(0,b.jsxs)(e,{className:"bg-gradient-to-br from-indigo-600 to-indigo-700 text-white border-0",children:[(0,b.jsx)(f,{children:(0,b.jsx)(g,{className:"text-sm font-medium text-indigo-100",children:"Current Balance"})}),(0,b.jsxs)(h,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"text-4xl font-bold",children:["$",a.toLocaleString()]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-500/20",children:(0,b.jsx)(j,{className:"h-4 w-4 text-green-300"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-indigo-100",children:"Income"}),(0,b.jsxs)("p",{className:"text-sm font-semibold",children:["$",c.toLocaleString()]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-red-500/20",children:(0,b.jsx)(k,{className:"h-4 w-4 text-red-300"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-indigo-100",children:"Expense"}),(0,b.jsxs)("p",{className:"text-sm font-semibold",children:["$",d.toLocaleString()]})]})]})]})]})]})}var m=a.i(33418),n=a.i(96690),o=a.i(43917),p=a.i(2471),q=a.i(95936);a.i(70396);var r=a.i(73727),s=a.i(33408),t=a.i(40924);let u=a=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(a).getDay()],v=(a,b)=>`Week ${b+1}`,w=a=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][new Date(a).getMonth()];async function x(a,b,c="current"){let d,e,f=await (0,t.getUserAccounts)(a),g=b;if(!g&&f&&f.length>0){let b=await (0,t.getUserDefaultAccount)(a);g=b?.default_account_id?b.default_account_id:f[0].id}let h=f?.find(a=>a.id===g)||f?.[0];if("previous"===c){let a,b,c,f=((b=new Date(a=new Date)).setDate(a.getDate()-a.getDay()-7),(c=new Date(b)).setDate(b.getDate()+6),{start:b,end:c});d=f.start,e=f.end}else{let a,b,c,f=((b=new Date(a=new Date)).setDate(a.getDate()-a.getDay()),(c=new Date(b)).setDate(b.getDate()+6),{start:b,end:c});d=f.start,e=f.end}let i=g?await (0,s.getAccountTransactionsByDateRange)(g,d.toISOString(),e.toISOString()):[],j=g?await (0,s.getAccountTransactions)(g):[],k=0,l=0;j?.forEach(a=>{"income"===a.type?k+=a.amount:l+=a.amount});let m=(h?.initial_balance||0)+k-l,n=0,o=0;i?.forEach(a=>{"income"===a.type?n+=a.amount:o+=a.amount});let p=[];for(let a=0;a<7;a++){let b=new Date(d);b.setDate(d.getDate()+a);let c=new Date(b.getFullYear(),b.getMonth(),b.getDate()),e=new Date(b.getFullYear(),b.getMonth(),b.getDate(),23,59,59,999),f=0,g=0;i?.forEach(a=>{let b=new Date(a.date);b>=c&&b<=e&&("income"===a.type?f+=a.amount:g+=a.amount)}),p.push({day:u(c.toISOString()),income:f,expense:g})}let q=[],r=new Date,y=new Date(r.getFullYear(),r.getMonth(),1),z=new Date(r.getFullYear(),r.getMonth()+1,0,23,59,59,999),A=Math.ceil((z.getDate()-y.getDate()+1)/7);for(let a=0;a<Math.min(A,4);a++){let b=new Date(y);b.setDate(y.getDate()+7*a);let c=new Date(b);c.setDate(b.getDate()+6),c>z&&c.setTime(z.getTime());let d=i?.filter(a=>new Date(a.date)>=b&&new Date(a.date)<=c)||[],e=0,f=0;d.forEach(a=>{"income"===a.type?e+=a.amount:f+=a.amount}),q.push({week:v(b.toISOString(),a),income:e,expense:f})}let B=[],C=new Date(r.getFullYear(),0,1);for(let a=0;a<12;a++){let b=new Date(C.getFullYear(),a,1),c=new Date(C.getFullYear(),a+1,0,23,59,59,999),d=i?.filter(a=>new Date(a.date)>=b&&new Date(a.date)<=c)||[],e=0,f=0;d.forEach(a=>{"income"===a.type?e+=a.amount:f+=a.amount}),B.push({month:w(b.toISOString()),income:e,expense:f})}return{accounts:f,selectedAccount:h,selectedAccountId:g,transactions:i,allTransactions:j,totalIncome:n,totalExpense:o,balance:m,dailyData:p,weeklyData:q,monthlyData:B,dateRange:c}}var y=a.i(89742),z=a.i(95987),A=a.i(717);async function B(a){let d=await a.searchParams,e=await (0,y.getCachedUser)();e||(0,r.redirect)("/login");let{accounts:f,selectedAccount:g,selectedAccountId:h,transactions:i,allTransactions:j,totalIncome:k,totalExpense:s,balance:t,dailyData:u,weeklyData:v,monthlyData:w,dateRange:A}=await x(e.id,d.account,d.dateRange);return(0,b.jsxs)("main",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"mx-auto max-w-6xl space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Dashboard"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.ThemeToggle,{}),(0,b.jsx)(q.default,{href:"/add",children:(0,b.jsxs)(o.Button,{className:"bg-indigo-600 hover:bg-indigo-700",children:[(0,b.jsx)(p.PlusIcon,{className:"mr-2 h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Add Transaction"})]})})]})]}),(0,b.jsx)(l,{balance:t,income:k,expense:s}),(0,b.jsxs)(n.Tabs,{defaultValue:"daily",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)(n.TabsList,{className:"grid w-full grid-cols-3 sm:w-[300px]",children:[(0,b.jsx)(n.TabsTrigger,{value:"daily",children:"Daily"}),(0,b.jsx)(n.TabsTrigger,{value:"weekly",children:"Weekly"}),(0,b.jsx)(n.TabsTrigger,{value:"monthly",children:"Monthly"})]}),(0,b.jsx)(z.DateFilter,{currentDateRange:A||"current"})]}),(0,b.jsx)(n.TabsContent,{value:"daily",className:"mt-6 p-0",children:(0,b.jsx)(m.ExpenseChart,{data:u,title:"Daily Overview",type:"bar",dataKeys:[{key:"income",color:"#10b981",label:"Income"},{key:"expense",color:"#ef4444",label:"Expense"}],xAxisKey:"day"})}),(0,b.jsx)(n.TabsContent,{value:"weekly",className:"mt-6 p-0",children:(0,b.jsx)(m.ExpenseChart,{data:v,title:"Weekly Overview",type:"line",dataKeys:[{key:"income",color:"#10b981",label:"Income"},{key:"expense",color:"#ef4444",label:"Expense"}],xAxisKey:"week"})}),(0,b.jsx)(n.TabsContent,{value:"monthly",className:"mt-6 p-0",children:(0,b.jsx)(m.ExpenseChart,{data:w,title:"Monthly Overview",type:"bar",dataKeys:[{key:"income",color:"#10b981",label:"Income"},{key:"expense",color:"#ef4444",label:"Expense"}],xAxisKey:"month"})})]})]}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:"Recent Transactions"}),(0,b.jsx)(q.default,{href:"/transactions",className:"text-sm text-indigo-600 hover:underline",children:"View All"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[i&&i.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.reason}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(a.date).toLocaleDateString()})]}),(0,b.jsxs)("p",{className:`font-medium ${"income"===a.type?"text-green-600":"text-red-600"}`,children:["income"===a.type?"+":"-","$",a.amount.toFixed(2)]})]},a.id)),(!i||0===i.length)&&(0,b.jsx)("p",{className:"py-4 text-center text-muted-foreground",children:"No transactions yet"})]})]})]})}function C(a){return(0,b.jsx)(A.Suspense,{fallback:(0,b.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-background z-[100] overflow-hidden",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4 px-4 w-full max-w-xs sm:max-w-sm",children:[(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)("img",{src:"/hisaab-logo-main.png",alt:"Hisaab Logo",className:"h-12 w-12 animate-pulse sm:h-16 sm:w-16"})}),(0,b.jsx)("div",{className:"h-1.5 w-full max-w-[96px] overflow-hidden rounded-full bg-muted sm:max-w-[128px] sm:h-2",children:(0,b.jsx)("div",{className:"h-full w-full animate-progress rounded-full bg-indigo-600"})})]})}),children:(0,b.jsx)(B,{...a})})}a.s(["default",()=>C],80463)}];

//# sourceMappingURL=_0ffa3e9a._.js.map