module.exports=[94383,a=>{"use strict";var b=a.i(87924),c=a.i(70106);let d=(0,c.default)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),e=(0,c.default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),f=(0,c.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),g=(0,c.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var h=a.i(40695),i=a.i(23292),j=a.i(72131),k=a.i(50944),l=a.i(5522),m=a.i(17171),n=a.i(3130),o=a.i(87682),p=a.i(46893),q=a.i(11889),r=a.i(30769);function s({transaction:a,onClose:c,onUpdate:d}){(0,k.useRouter)();let[e,f]=(0,j.useState)(a.amount.toString()),[g,s]=(0,j.useState)(a.reason),[t,u]=(0,j.useState)(a.type),[v,w]=(0,j.useState)(a.category),[x,y]=(0,j.useState)(new Date(a.date).toISOString().split("T")[0]),[z,A]=(0,j.useState)(!1),[B,C]=(0,j.useState)({}),D=async b=>{let f,h;if(b.preventDefault(),f={},h=parseFloat(e),e?(isNaN(h)||h<=0)&&(f.amount="Please enter a valid positive amount"):f.amount="Amount is required",g.trim()||(f.reason="Reason is required"),v||(f.category="Category is required"),x||(f.date="Date is required"),C(f),0!==Object.keys(f).length)return void i.toast.error("Please fix the errors below");A(!0);try{let b=new FormData;b.append("amount",e),b.append("reason",g),b.append("type",t),b.append("category",v),b.append("date",x?new Date(x).toISOString():new Date().toISOString());let f=await fetch(`/api/transactions/update/${a.id}`,{method:"PUT",body:b}),h=await f.json();if(!f.ok||!h.success){i.toast.error(h.error||"Failed to update transaction"),A(!1);return}i.toast.success("Transaction updated successfully"),d(h.data),c()}catch(a){i.toast.error("An unexpected error occurred"),A(!1)}};return(0,b.jsxs)(n.Card,{children:[(0,b.jsx)(n.CardHeader,{children:(0,b.jsx)(n.CardTitle,{children:"Edit Transaction"})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"type",children:"Type"}),(0,b.jsxs)(o.Select,{value:t,onValueChange:a=>u(a),children:[(0,b.jsx)(o.SelectTrigger,{id:"type",children:(0,b.jsx)(o.SelectValue,{})}),(0,b.jsxs)(o.SelectContent,{children:[(0,b.jsx)(o.SelectItem,{value:"income",children:"Income"}),(0,b.jsx)(o.SelectItem,{value:"expense",children:"Expense"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"amount",children:"Amount"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-lg text-muted-foreground",children:"$"}),(0,b.jsx)(l.Input,{id:"amount",type:"number",placeholder:"0.00",value:e,onChange:a=>{f(a.target.value),B.amount&&C(a=>({...a,amount:void 0}))},className:`pl-8 ${B.amount?"border-red-500":""}`,min:"0",step:"0.01"}),B.amount&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:B.amount})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"category",children:"Category"}),(0,b.jsxs)(o.Select,{value:v,onValueChange:a=>{w(a),B.category&&C(a=>({...a,category:void 0}))},children:[(0,b.jsx)(o.SelectTrigger,{id:"category",className:B.category?"border-red-500":"",children:(0,b.jsx)(o.SelectValue,{placeholder:"Select a category"})}),(0,b.jsx)(o.SelectContent,{children:q.categories.map(a=>(0,b.jsx)(o.SelectItem,{value:a,children:a},a))})]}),B.category&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:B.category})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"reason",children:"Reason"}),(0,b.jsx)(p.Textarea,{id:"reason",placeholder:"What was this transaction for?",value:g,onChange:a=>{s(a.target.value),B.reason&&C(a=>({...a,reason:void 0}))},className:B.reason?"border-red-500":"",rows:3}),B.reason&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:B.reason})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Label,{htmlFor:"date",children:"Date"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(r.CalendarIcon,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(l.Input,{id:"date",type:"date",value:x,onChange:a=>{y(a.target.value),B.date&&C(a=>({...a,date:void 0}))},className:`pl-10 ${B.date?"border-red-500":""}`}),B.date&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:B.date})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(h.Button,{type:"button",variant:"outline",className:"flex-1",onClick:c,disabled:z,children:"Cancel"}),(0,b.jsx)(h.Button,{type:"submit",className:"flex-1 bg-indigo-600 hover:bg-indigo-700",disabled:z,children:z?"Updating...":"Update Transaction"})]})]})})]})}var t=a.i(65733);function u({transaction:a,onUpdate:c}){let[k,l]=(0,j.useState)(!1),[m,n]=(0,j.useState)(!1),[o,p]=(0,j.useState)(!1),[q,r]=(0,j.useState)(a),u="income"===q.type,v=new Date(q.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),w=async()=>{try{let a=await fetch(`/api/transactions/delete/${q.id}`,{method:"DELETE"}),b=await a.json();if(!a.ok||!b.success)return void i.toast.error(b.error||"Failed to delete transaction");i.toast.success("Transaction deleted successfully"),l(!0)}catch(a){i.toast.error("An unexpected error occurred")}};return k?null:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4 hover:bg-muted/50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${u?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:u?(0,b.jsx)(d,{className:"h-5 w-5"}):(0,b.jsx)(e,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:q.reason}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[q.category," â€¢ ",v]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("p",{className:`text-lg font-semibold ${u?"text-green-600":"text-red-600"}`,children:[u?"+":"-","$",q.amount.toLocaleString()]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>n(!0),children:(0,b.jsx)(g,{className:"h-4 w-4"})}),(0,b.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>p(!0),children:(0,b.jsx)(f,{className:"h-4 w-4"})})]})]})]}),(0,b.jsx)(t.Dialog,{open:m,onOpenChange:n,children:(0,b.jsxs)(t.DialogContent,{className:"max-w-md",children:[(0,b.jsx)(t.DialogHeader,{children:(0,b.jsx)(t.DialogTitle,{children:"Edit Transaction"})}),(0,b.jsx)(s,{transaction:q,onClose:()=>n(!1),onUpdate:a=>{r(a),c&&c(a),i.toast.success("Transaction updated successfully")}})]})}),(0,b.jsx)(t.Dialog,{open:o,onOpenChange:p,children:(0,b.jsxs)(t.DialogContent,{children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{children:"Confirm Deletion"}),(0,b.jsx)(t.DialogDescription,{children:"Are you sure you want to delete this transaction? This action cannot be undone."})]}),(0,b.jsxs)(t.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,b.jsx)(h.Button,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,b.jsx)(h.Button,{variant:"destructive",onClick:()=>{w(),p(!1)},children:"Delete"})]})]})})]})}var v=a.i(21958);let w=(0,c.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),x=(0,c.default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),y=(a,b)=>{let c=new Date;if("daily"===b){let b=new Date(c.getFullYear(),c.getMonth(),c.getDate());return a.filter(a=>{let c=new Date(a.date);return new Date(c.getFullYear(),c.getMonth(),c.getDate()).getTime()===b.getTime()})}if("weekly"===b){let b=new Date(c);b.setDate(c.getDate()-c.getDay());let d=new Date(b);return d.setDate(b.getDate()+6),a.filter(a=>{let c=new Date(a.date);return c>=b&&c<=d})}if("monthly"===b){let b=new Date(c.getFullYear(),c.getMonth(),1),d=new Date(c.getFullYear(),c.getMonth()+1,0);return a.filter(a=>{let c=new Date(a.date);return c>=b&&c<=d})}return a};function z({initialTransactions:a,accounts:c,selectedAccountId:f}){let{searchTerm:g,setSearchTerm:i,dateFilter:m,setDateFilter:n,typeFilter:p,setTypeFilter:q,filteredTransactions:r,handleTransactionUpdate:s,handleAccountChange:t}=(a=>{let[b,c]=(0,j.useState)(""),[d,e]=(0,j.useState)("all"),[f,g]=(0,j.useState)("all"),[h,i]=(0,j.useState)(a),[l,m]=(0,j.useState)(a),n=(0,k.useRouter)(),o=(0,k.useSearchParams)();return(0,j.useEffect)(()=>{var a;let c=[...l];a=c=y(c=((a,b)=>{if(!b)return a;let c=b.toLowerCase();return a.filter(a=>a.reason.toLowerCase().includes(c)||a.category.toLowerCase().includes(c))})(c,b),d),i(c="income"===f?a.filter(a=>"income"===a.type):"expense"===f?a.filter(a=>"expense"===a.type):a)},[b,d,f,l]),(0,j.useEffect)(()=>{m(a)},[a]),{searchTerm:b,setSearchTerm:c,dateFilter:d,setDateFilter:e,typeFilter:f,setTypeFilter:g,filteredTransactions:h,handleTransactionUpdate:(0,j.useCallback)(a=>{m(b=>b.map(b=>b.id===a.id?a:b))},[]),handleAccountChange:a=>{let b=new URLSearchParams(o.toString());b.set("account",a),n.push(`/transactions?${b.toString()}`)}}})(a);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.length>1&&(0,b.jsx)("div",{className:"w-full sm:w-64",children:(0,b.jsxs)(o.Select,{value:f||"",onValueChange:t,children:[(0,b.jsx)(o.SelectTrigger,{children:(0,b.jsx)(o.SelectValue,{placeholder:"Select account"})}),(0,b.jsx)(o.SelectContent,{children:c.map(a=>(0,b.jsx)(o.SelectItem,{value:a.id,children:a.name},a.id))})]})}),(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(w,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(l.Input,{placeholder:"Search transactions...",className:"pl-10",value:g,onChange:a=>i(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex gap-1 sm:gap-2",children:[(0,b.jsxs)(h.Button,{variant:"all"===p?"default":"outline",className:"gap-1 sm:gap-2 px-2 sm:px-4",onClick:()=>q("all"),size:"sm",children:[(0,b.jsx)(x,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"All"})]}),(0,b.jsxs)(h.Button,{variant:"income"===p?"default":"outline",className:"gap-1 sm:gap-2 px-2 sm:px-4",onClick:()=>q("income"),size:"sm",children:[(0,b.jsx)(d,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Income"})]}),(0,b.jsxs)(h.Button,{variant:"expense"===p?"default":"outline",className:"gap-1 sm:gap-2 px-2 sm:px-4",onClick:()=>q("expense"),size:"sm",children:[(0,b.jsx)(e,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Expense"})]})]})]}),(0,b.jsxs)(v.Tabs,{value:m,onValueChange:n,children:[(0,b.jsxs)(v.TabsList,{className:"grid w-full grid-cols-4",children:[(0,b.jsx)(v.TabsTrigger,{value:"all",children:"All"}),(0,b.jsx)(v.TabsTrigger,{value:"daily",children:"Daily"}),(0,b.jsx)(v.TabsTrigger,{value:"weekly",children:"Weekly"}),(0,b.jsx)(v.TabsTrigger,{value:"monthly",children:"Monthly"})]}),(0,b.jsx)(v.TabsContent,{value:"all",className:"mt-6 space-y-4",children:r.length>0?r.map(a=>(0,b.jsx)(u,{transaction:a,onUpdate:s},a.id)):(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No transactions found"})}),(0,b.jsx)(v.TabsContent,{value:"daily",className:"mt-6 space-y-4",children:r.length>0?y(r,"daily").map(a=>(0,b.jsx)(u,{transaction:a,onUpdate:s},a.id)):(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No transactions found"})}),(0,b.jsx)(v.TabsContent,{value:"weekly",className:"mt-6 space-y-4",children:r.length>0?y(r,"weekly").map(a=>(0,b.jsx)(u,{transaction:a,onUpdate:s},a.id)):(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No transactions found"})}),(0,b.jsx)(v.TabsContent,{value:"monthly",className:"mt-6 space-y-4",children:r.length>0?y(r,"monthly").map(a=>(0,b.jsx)(u,{transaction:a,onUpdate:s},a.id)):(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No transactions found"})})]})]})}a.s(["TransactionsClient",()=>z],94383)}];

//# sourceMappingURL=components_transactions_client_tsx_824fb354._.js.map