{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","../../../../node_modules/%40radix-ui/react-label/dist/index.mjs","../../../../components/ui/label.tsx","../../../../components/ui/input.tsx","../../../../app/setup/page.tsx","../../../../lib/setup/validation.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","\"use client\";\n\n// packages/react/label/src/Label.tsx\nimport * as React from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NAME = \"Label\";\nvar Label = React.forwardRef((props, forwardedRef) => {\n  return /* @__PURE__ */ jsx(\n    Primitive.label,\n    {\n      ...props,\n      ref: forwardedRef,\n      onMouseDown: (event) => {\n        const target = event.target;\n        if (target.closest(\"button, input, select, textarea\")) return;\n        props.onMouseDown?.(event);\n        if (!event.defaultPrevented && event.detail > 1) event.preventDefault();\n      }\n    }\n  );\n});\nLabel.displayName = NAME;\nvar Root = Label;\nexport {\n  Label,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n","'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\n\nimport { cn } from '@/lib/utils'\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n","import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n","\"use client\"\n\nimport { useState } from \"react\"\nimport { useRouter } from 'next/navigation'\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { createClient } from '@/lib/supabase/client'\nimport { toast } from \"sonner\"\nimport { validateSetupForm } from \"@/lib/setup/validation\"\n// Removed the import of setupUserAccount since it's a server-side function\n\nexport default function SetupPage() {\n  const router = useRouter()\n  const [accountName, setAccountName] = useState(\"Main Account\")\n  const [initialBalance, setInitialBalance] = useState(\"\")\n  const [loading, setLoading] = useState(false)\n  const [errors, setErrors] = useState<{accountName?: string, initialBalance?: string}>({})\n\n  const supabase = createClient()\n\n  const handleSetup = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    // Validate form before submission\n    const validation = validateSetupForm(accountName, initialBalance)\n    if (!validation.isValid) {\n      setErrors(validation.errors)\n      toast.error(\"Please fix the errors below\")\n      return\n    }\n    \n    setLoading(true)\n    \n    try {\n      const { data: { user }, error: userError } = await supabase.auth.getUser()\n      \n      if (userError || !user) {\n        toast.error(\"You must be logged in to set up your account\")\n        setLoading(false)\n        return\n      }\n\n      // Setup the user account using the API route\n      const response = await fetch('/api/setup/account', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          name: accountName,\n          initial_balance: initialBalance\n        }),\n      })\n\n      const result = await response.json()\n\n      if (!response.ok || !result.success) {\n        toast.error(result.error || \"Failed to set up account\")\n        setLoading(false)\n        return\n      }\n\n      toast.success(\"Account setup completed successfully\")\n      router.push(\"/dashboard\")\n    } catch (error: any) {\n      toast.error(error.message || \"An unexpected error occurred\")\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-br from-indigo-50 to-white p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"space-y-1\">\n          <CardTitle className=\"text-3xl font-bold text-center\">\n            Welcome to Hisaab\n          </CardTitle>\n          <CardDescription className=\"text-center\">\n            Let's get started by setting up your first account\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSetup} className=\"space-y-6\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"account-name\" className=\"text-base\">\n                Account Name\n              </Label>\n              <Input\n                id=\"account-name\"\n                type=\"text\"\n                placeholder=\"e.g., Main Account, Checking Account\"\n                value={accountName}\n                onChange={(e) => {\n                  setAccountName(e.target.value)\n                  // Clear error when user types\n                  if (errors.accountName) {\n                    setErrors(prev => ({ ...prev, accountName: undefined }))\n                  }\n                }}\n                className={`text-base h-12 ${errors.accountName ? \"border-red-500\" : \"\"}`}\n              />\n              {errors.accountName && (\n                <p className=\"text-sm text-red-500\">{errors.accountName}</p>\n              )}\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"balance\" className=\"text-base\">\n                Initial Balance\n              </Label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-2xl text-muted-foreground\">\n                  $\n                </span>\n                <Input\n                  id=\"balance\"\n                  type=\"number\"\n                  placeholder=\"0\"\n                  value={initialBalance}\n                  onChange={(e) => {\n                    setInitialBalance(e.target.value)\n                    // Clear error when user types\n                    if (errors.initialBalance) {\n                      setErrors(prev => ({ ...prev, initialBalance: undefined }))\n                    }\n                  }}\n                  className={`pl-8 text-2xl h-12 ${errors.initialBalance ? \"border-red-500\" : \"\"}`}\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n                {errors.initialBalance && (\n                  <p className=\"text-sm text-red-500\">{errors.initialBalance}</p>\n                )}\n              </div>\n            </div>\n            <Button \n              type=\"submit\" \n              className=\"w-full bg-indigo-600 hover:bg-indigo-700\"\n              disabled={loading}\n            >\n              {loading ? \"Setting up...\" : \"Complete Setup\"}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}","export function validateSetupForm(accountName: string, initialBalance: string) {\n  const errors: {accountName?: string, initialBalance?: string} = {}\n  \n  // Account name validation\n  if (!accountName.trim()) {\n    errors.accountName = \"Account name is required\"\n  }\n  \n  // Initial balance validation\n  const balance = parseFloat(initialBalance)\n  if (initialBalance && (isNaN(balance) || balance < 0)) {\n    errors.initialBalance = \"Please enter a valid positive number\"\n  }\n  \n  return {\n    isValid: Object.keys(errors).length === 0,\n    errors\n  }\n}"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactDOM"],"mappings":"+iBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,gBAAgB,+BCFvCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,+BCFzCL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,kBAAkB,+BCFzCN,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEI,QAAQ,+CGAjC,EAAA,EAAA,CAAA,CAAA,OAEA,SAAS,EAAM,CAAE,WAAS,MAAE,CAAI,CAAE,GAAG,EAAsC,EACzE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAM,EACN,YAAU,QACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,6bACA,gFACA,yGACA,GAED,GAAG,CAAK,EAGf,2BFfA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAGI,EAAQ,EAAA,UAAgB,CAAC,CAAC,EAAO,IACZ,CAAA,EAAA,EAAA,GAAA,AAAG,EACxB,EAAA,SAAS,CAAC,KAAK,CACf,CACE,GAAG,CAAK,CACR,IAAK,EACL,YAAa,AAAC,IACG,AACX,EADiB,MAAM,CAChB,OAAO,CAAC,oCAAoC,CACvD,EAAM,WAAW,GAAG,GAChB,CAAC,EAAM,gBAAgB,EAAI,EAAM,MAAM,CAAG,GAAG,EAAM,cAAc,GACvE,CACF,ICZJ,SAAS,EAAM,WACb,CAAS,CACT,GAAG,EAC8C,EACjD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,ADWM,ECXN,CACC,YAAU,QACV,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,sNACA,GAED,GAAG,CAAK,EAGf,CDCA,EAAM,WAAW,CAhBN,EAgBS,0EGpBpB,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAIe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,gBACzC,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkD,CAAC,GAEjF,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IAEvB,EAAc,MAAO,YACzB,EAAE,cAAc,GAGhB,IAAM,GCzBF,EAA0D,CAAC,EAG5D,ADsBkC,ACtBnC,EAAa,GDsBI,CCtBA,IAAI,CACvB,EAAO,WAAW,CAAG,0BAAA,EAIjB,EAAU,WAAW,GDiByB,AChBhD,IAAmB,MAAM,IAAY,GAAU,CAA7B,AAA8B,GAAG,AACrD,EAAO,cAAc,CAAG,sCAAA,EAGnB,CACL,QAAwC,IAA/B,OAAO,IAAI,CAAC,GAAQ,MAAM,QACnC,CACF,GDUE,GAAI,CAAC,EAAW,OAAO,CAAE,CACvB,EAAU,EAAW,MAAM,EAC3B,EAAA,KAAK,CAAC,KAAK,CAAC,+BACZ,MACF,CAEA,GAAW,GAEX,GAAI,CACF,GAAM,CAAE,KAAM,MAAE,CAAI,CAAE,CAAE,MAAO,CAAS,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,GAExE,GAAI,GAAa,CAAC,EAAM,CACtB,EAAA,KAAK,CAAC,KAAK,CAAC,gDACZ,EAAW,IACX,MACF,CAGA,IAAM,EAAW,MAAM,MAAM,qBAAsB,CACjD,OAAQ,OACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,CACnB,KAAM,EACN,gBAAiB,CACnB,EACF,GAEM,EAAS,MAAM,EAAS,IAAI,GAElC,GAAI,CAAC,EAAS,EAAE,EAAI,CAAC,EAAO,OAAO,CAAE,CACnC,EAAA,KAAK,CAAC,KAAK,CAAC,EAAO,KAAK,EAAI,4BAC5B,GAAW,GACX,MACF,CAEA,EAAA,KAAK,CAAC,OAAO,CAAC,wCACd,EAAO,IAAI,CAAC,aACd,CAAE,MAAO,EAAY,CACnB,EAAA,KAAK,CAAC,KAAK,CAAC,EAAM,OAAO,EAAI,gCAC7B,EAAW,GACb,CACF,EAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uGACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,4BACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,sBACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,0CAAiC,sBAGtD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAU,uBAAc,0DAI3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAa,UAAU,sBACrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,eAAe,UAAU,qBAAY,iBAGpD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,eACH,KAAK,OACL,YAAY,uCACZ,MAAO,EACP,SAAU,AAAC,IACT,EAAe,EAAE,MAAM,CAAC,KAAK,EAEzB,EAAO,WAAW,EAAE,AACtB,EAAU,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,iBAAa,EAAU,CAAC,CAE1D,EACA,UAAW,CAAC,eAAe,EAAE,EAAO,WAAW,CAAG,iBAAmB,GAAA,CAAI,GAE1E,EAAO,WAAW,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gCAAwB,EAAO,WAAW,MAI3D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,UAAU,UAAU,qBAAY,oBAG/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mFAA0E,MAG1F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,UACH,KAAK,SACL,YAAY,IACZ,MAAO,EACP,SAAU,AAAC,IACT,EAAkB,EAAE,MAAM,CAAC,KAAK,EAE5B,EAAO,cAAc,EAAE,AACzB,EAAU,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,oBAAgB,EAAU,CAAC,CAE7D,EACA,UAAW,CAAC,mBAAmB,EAAE,EAAO,cAAc,CAAG,iBAAmB,GAAA,CAAI,CAChF,IAAI,IACJ,KAAK,SAEN,EAAO,cAAc,EACpB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gCAAwB,EAAO,cAAc,SAIhE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,UAAU,2CACV,SAAU,WAET,EAAU,gBAAkB,4BAO3C","ignoreList":[0,1,2,3,4]}