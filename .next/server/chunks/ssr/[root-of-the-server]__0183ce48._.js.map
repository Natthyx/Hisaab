{"version":3,"sources":["../../../../components/layout/theme-provider.tsx","../../../../lib/state/userContext.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport {\n  ThemeProvider as NextThemesProvider,\n  type ThemeProviderProps,\n} from 'next-themes'\n\nexport function ThemeProvider({ children, ...props }: ThemeProviderProps) {\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>\n}\n","\"use client\"\n\nimport { createContext, useContext, ReactNode, useState, useEffect } from \"react\"\nimport { createClient } from '@/lib/supabase/client'\n\ninterface User {\n  id: string\n  email: string\n  // Add other user properties as needed\n}\n\ninterface UserContextType {\n  user: User | null\n  loading: boolean\n  fetchUser: () => Promise<void>\n}\n\nconst UserContext = createContext<UserContextType | undefined>(undefined)\n\nexport function UserProvider({\n  children,\n  initialUser\n}: {\n  children: ReactNode\n  initialUser: User | null\n}) {\n  const [user, setUser] = useState<User | null>(initialUser)\n  const [loading, setLoading] = useState<boolean>(!initialUser)\n  const supabase = createClient()\n\n  const fetchUser = async () => {\n    if (user) return // Already have user data\n\n    setLoading(true)\n    try {\n      const { data: { user: userData }, error } = await supabase.auth.getUser()\n      \n      if (error) {\n        console.error(\"Error fetching user:\", error)\n        setUser(null)\n      } else if (userData) {\n        setUser({\n          id: userData.id,\n          email: userData.email || ''\n          // Map other properties as needed\n        })\n      } else {\n        setUser(null)\n      }\n    } catch (error) {\n      console.error(\"Unexpected error fetching user:\", error)\n      setUser(null)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Fetch user on mount if not already provided\n  useEffect(() => {\n    if (!user && !loading) {\n      fetchUser()\n    }\n  }, [])\n\n  return (\n    <UserContext.Provider\n      value={{\n        user,\n        loading,\n        fetchUser\n      }}\n    >\n      {children}\n    </UserContext.Provider>\n  )\n}\n\nexport function useUserContext() {\n  const context = useContext(UserContext)\n  if (context === undefined) {\n    throw new Error(\"useUserContext must be used within a UserProvider\")\n  }\n  return context\n}"],"names":[],"mappings":"qOAGA,EAAA,EAAA,CAAA,CAAA,OAKO,SAAS,EAAc,UAAE,CAAQ,CAAE,GAAG,EAA2B,EACtE,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAkB,CAAA,CAAE,GAAG,CAAK,UAAG,GACzC,uECRA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAcA,IAAM,EAAc,CAAA,EAAA,EAAA,aAAA,AAAa,OAA8B,GAExD,SAAS,EAAa,UAC3B,CAAQ,aACR,CAAW,CAIZ,EACC,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,GACxC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAU,CAAC,GAC3C,EAAW,CAAA,EAAA,EAAA,YAAY,AAAZ,IAEX,EAAY,UAChB,IAAI,GAEJ,GAFU,AAEC,GACX,GAAI,CACF,CAJe,EAIT,CAAE,KAAM,CAAE,KAAM,CAAQ,CAAE,OAAE,CAAK,CAJC,AAIC,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,GAEnE,GACF,IADS,IACD,KAAK,CAAC,uBAAwB,GACtC,EAAQ,OACC,EACT,EAAQ,CACN,GAAI,EAFa,AAEJ,EAAE,CACf,MAAO,EAAS,KAAK,EAAI,EAE3B,GAEA,EAAQ,KAEZ,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,kCAAmC,GACjD,EAAQ,KACV,QAAU,CACR,GAAW,EACb,EACF,EASA,MANA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,AAAC,GAAS,GACZ,EADW,CAGf,EAAG,CAHsB,CAGpB,EAGH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAY,QAAQ,CAAA,CACnB,MAAO,MACL,UACA,YACA,CACF,WAEC,GAGP,CAEO,SAAS,IACd,IAAM,EAAU,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,GAC3B,QAAgB,IAAZ,EACF,KADyB,CACnB,AAAI,MAAM,qDAElB,OAAO,CACT"}