module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},56363,a=>{"use strict";var b=a.i(87924),c=a.i(70106);let d=(0,c.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),e=(0,c.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var f=a.i(13902),g=a.i(40695);function h(){let{theme:a,setTheme:c}=(0,f.useTheme)();return(0,b.jsxs)(g.Button,{variant:"ghost",size:"icon",onClick:()=>c("dark"===a?"light":"dark"),"aria-label":"Toggle theme",children:[(0,b.jsx)(e,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,b.jsx)(d,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]})}a.s(["ThemeToggle",()=>h],56363)},5522,17171,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d],5522);var e=a.i(72131),f=a.i(30553),g=e.forwardRef((a,c)=>(0,b.jsx)(f.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));function h({className:a,...d}){return(0,b.jsx)(g,{"data-slot":"label",className:(0,c.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...d})}g.displayName="Label",a.s(["Label",()=>h],17171)},39254,a=>{"use strict";a.s(["validateAccountForm",0,a=>{let b={},c=a.get("name");c?.trim()||(b.name="Account name is required");let d=a.get("initial_balance");if(d){let a=parseFloat(d);(isNaN(a)||a<0)&&(b.initial_balance="Please enter a valid positive number")}return{isValid:0===Object.keys(b).length,errors:b}},"validateTransactionForm",0,a=>{let b={},c=a.get("amount");if(c){let a=parseFloat(c);(isNaN(a)||a<=0)&&(b.amount="Please enter a valid positive number")}else b.amount="Amount is required";let d=a.get("reason");d?.trim()||(b.reason="Reason is required");let e=a.get("category");return e?.trim()||(b.category="Category is required"),{isValid:0===Object.keys(b).length,errors:b}}])},46893,11889,30769,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d],46893),a.s(["categories",0,["Food & Dining","Transportation","Shopping","Entertainment","Bills & Utilities","Healthcare","Education","Salary","Freelance","Investment","Gift","Other"]],11889);let e=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["CalendarIcon",()=>e],30769)},10496,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["default",()=>b])},99804,a=>{"use strict";var b=a.i(87924),c=a.i(10496),c=c,d=a.i(187),e=a.i(97895);let f=(0,d.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function g({className:a,variant:c,...d}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,e.cn)(f({variant:c}),a),...d})}function h({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-title",className:(0,e.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...c})}function i({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,e.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}function j({title:a="Error",message:d,className:e}){return(0,b.jsxs)(g,{variant:"destructive",className:e,children:[(0,b.jsx)(c.default,{className:"h-4 w-4"}),(0,b.jsx)(h,{children:a}),(0,b.jsx)(i,{children:d})]})}a.s(["ErrorMessage",()=>j],99804)},39454,a=>{"use strict";var b=a.i(87924),c=a.i(40695),d=a.i(5522),e=a.i(17171),f=a.i(3130),g=a.i(87682),h=a.i(46893),i=a.i(99804),j=a.i(11889),k=a.i(30769),l=a.i(72131),m=a.i(50944),n=a.i(23292),o=a.i(39254);function p({accounts:a,defaultAccountId:p}){let q=(0,m.useRouter)(),{amount:r,reason:s,type:t,category:u,date:v,accountId:w,loading:x,errors:y,accounts:z,setType:A,setDate:B,handleAmountChange:C,handleReasonChange:D,handleCategoryChange:E,handleAccountChange:F,handleSubmit:G}=function(a,b){let c=(0,m.useRouter)(),[d,e]=(0,l.useState)(""),[f,g]=(0,l.useState)(""),[h,i]=(0,l.useState)("expense"),[j,k]=(0,l.useState)(""),[p,q]=(0,l.useState)(""),[r,s]=(0,l.useState)(""),[t,u]=(0,l.useState)(!1),[v,w]=(0,l.useState)({});(0,l.useEffect)(()=>{a.length>0&&(b?s(b):s(a[0].id))},[a,b]);let x=()=>{let b=new FormData;b.append("amount",d),b.append("reason",f),b.append("category",j);let c={...(0,o.validateTransactionForm)(b).errors};return a.length>1&&!r&&(c.accountId="Please select an account"),w(c),0===Object.keys(c).length},y=async a=>{if(a.preventDefault(),!x())throw n.toast.error("Please fix the errors below"),Error("Form validation failed");u(!0);try{let a=new FormData;a.append("amount",d),a.append("reason",f),a.append("type",h),a.append("category",j);let b=p||new Date().toISOString().split("T")[0];a.append("date",b),r&&a.append("accountId",r);let e=await fetch("/api/transactions/create",{method:"POST",body:a}),g=await e.json();if(!e.ok||!g.success)throw n.toast.error(g.error||"Failed to add transaction"),u(!1),Error(g.error||"Failed to add transaction");n.toast.success("Transaction added successfully"),c.push("/transactions")}catch(a){throw n.toast.error("An unexpected error occurred"),u(!1),a}};return{amount:d,reason:f,type:h,category:j,date:p,accountId:r,loading:t,errors:v,accounts:a,setType:i,setDate:q,handleAmountChange:a=>{e(a),v.amount&&w(a=>({...a,amount:void 0}))},handleReasonChange:a=>{g(a),v.reason&&w(a=>({...a,reason:void 0}))},handleCategoryChange:a=>{k(a),v.category&&w(a=>({...a,category:void 0}))},handleAccountChange:a=>{s(a),v.accountId&&w(a=>({...a,accountId:void 0}))},handleSubmit:y,validateForm:x}}(a,p),[H,I]=(0,l.useState)(null);(0,l.useEffect)(()=>{I(null)},[r,s,t,u,v,w]);let J=async a=>{a.preventDefault(),I(null);try{await G(a)}catch(a){I(a.message||"Failed to add transaction. Please try again.")}};return(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Transaction Details"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("form",{onSubmit:J,className:"space-y-6",children:[H&&(0,b.jsx)(i.ErrorMessage,{title:"Transaction Error",message:H}),a.length>1&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"account",children:"Account"}),(0,b.jsxs)(g.Select,{value:w,onValueChange:F,children:[(0,b.jsx)(g.SelectTrigger,{id:"account",className:y.accountId?"border-red-500":"",children:(0,b.jsx)(g.SelectValue,{placeholder:"Select an account"})}),(0,b.jsx)(g.SelectContent,{children:a.map(a=>(0,b.jsx)(g.SelectItem,{value:a.id,children:a.name},a.id))})]}),y.accountId&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:y.accountId})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"type",children:"Type"}),(0,b.jsxs)(g.Select,{value:t,onValueChange:a=>A(a),children:[(0,b.jsx)(g.SelectTrigger,{id:"type",children:(0,b.jsx)(g.SelectValue,{})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"income",children:"Income"}),(0,b.jsx)(g.SelectItem,{value:"expense",children:"Expense"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"amount",children:"Amount"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-lg text-muted-foreground",children:"$"}),(0,b.jsx)(d.Input,{id:"amount",type:"number",placeholder:"0.00",value:r,onChange:a=>C(a.target.value),className:`pl-8 ${y.amount?"border-red-500":""}`,min:"0",step:"0.01"}),y.amount&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:y.amount})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"category",children:"Category"}),(0,b.jsxs)(g.Select,{value:u,onValueChange:E,children:[(0,b.jsx)(g.SelectTrigger,{id:"category",className:y.category?"border-red-500":"",children:(0,b.jsx)(g.SelectValue,{placeholder:"Select a category"})}),(0,b.jsx)(g.SelectContent,{children:j.categories.map(a=>(0,b.jsx)(g.SelectItem,{value:a,children:a},a))})]}),y.category&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:y.category})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"reason",children:"Reason"}),(0,b.jsx)(h.Textarea,{id:"reason",placeholder:"What was this transaction for?",value:s,onChange:a=>D(a.target.value),className:y.reason?"border-red-500":"",rows:3}),y.reason&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:y.reason})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(e.Label,{htmlFor:"date",children:"Date"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(k.CalendarIcon,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(d.Input,{id:"date",type:"date",value:v,onChange:a=>B(a.target.value),className:"pl-10"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:v?"Selected date will be used":"No date selected - today's date will be used"})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(c.Button,{type:"button",variant:"outline",className:"flex-1",onClick:()=>q.back(),disabled:x,children:"Cancel"}),(0,b.jsx)(c.Button,{type:"submit",className:"flex-1 bg-indigo-600 hover:bg-indigo-700",disabled:x||a.length>1&&!w,children:x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Adding..."]}):"Add Transaction"})]})]})})]})}a.s(["AddTransactionClient",()=>p],39454)}];

//# sourceMappingURL=_99fb6575._.js.map